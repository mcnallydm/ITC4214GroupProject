<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>List Creator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js" ></script>
    <link rel="stylesheet" href="custom.css"> <!-- Custom .css file - D.McNally - A.Panussis-->

</head>
<body>
    <div class="sticky-top"> <!-- Changed color from bg-White to another through CSS - INCOMPLETE - CSS NEEDS FIXING - A.Panussis -->

        <h1 class="display-5 text-center py-4 ">List Creator</h1> <!-- Formatted the title to look a little more elegant - A.Panussis-->

        <div class = "row"> <!--Formatted the entry boxes to automatically scale for screen size and made several adjustments to margins, padding, box sizing, FIX text, FIX color - A.Panussis-->

            <div class = "col">
                <div class="card my-3 mx-auto position-relative" style="width: 18rem; height: 7rem;">
                    <div class="card-body">
                        <h5 class="card-title pt-1 pb-4 text-center">Detail 1 Card title</h5>
                        <input class="pb-1 position-absolute top-80 start-50 translate-middle" type="text" id="input1" placeholder="Type here...">
                    </div>
                </div>
            </div>

            <div class = "col">
                <div class="card my-3 mx-auto position-relative" style="width: 18rem; height: 7rem;">
                    <div class="card-body">
                        <h5 class="card-title pt-1 pb-4 text-center">Detail 2 Card title</h5>
                        <input class="pb-1 position-absolute top-80 start-50 translate-middle" type="text" id="input2" placeholder="Type here...">
                    </div>
                </div>
            </div>

            <div class = "col">
                <div class="card my-3 mx-auto position-relative" style="width: 18rem; height: 7rem;">
                    <div class="card-body">
                        <h5 class="card-title pt-1 pb-4 text-center">Detail 3 Card title</h5>
                        <input class="pb-1 position-absolute top-80 start-50 translate-middle" type="text" id="input3" placeholder="Type here...">
                    </div>
                </div>
            </div>

        </div> <!--Formatted the entry boxes to automatically scale for screen size and made several adjustments to margins, padding, box sizing, FIX text, FIX color - A.Panussis-->


        <div class="text-center">
            <p>
                <button class="btn btn-warning my-2" onclick="submit();">Add to List</button>
                <!-- ^ Formatted the button to appear underneath the entry boxes formatted the button color to appear a different color - INCOMPLETE - CSS NEES FIXING - A.Panussis-->
            </p>
        </div>

    </div>
    
    <table class="table table-striped table-responsive">
        <thead>
          <tr>
            <th scope="col">Detail 1
                <select id="col1">
                    <option value="new-old">New-Old</option>
                    <option value="old-new">Old-New</option>
                    <option value="a-z">A-Z</option>
                    <option value="z-a">Z-A</option>
                </select>
                <button class="btn btn-secondary" onclick="sort(1);">Sort</button>
            </th>
            <th scope="col">Detail 2
                <select id="col2">
                    <option value="new-old">New-Old</option>
                    <option value="old-new">Old-New</option>
                    <option value="a-z">A-Z</option>
                    <option value="z-a">Z-A</option>
                </select>
                <button class="btn btn-secondary" onclick="sort(2);">Sort</button>
            </th>
            <th scope="col">Detail 3
                <select id="col3">
                    <option value="new-old">New-Old</option>
                    <option value="old-new">Old-New</option>
                    <option value="a-z">A-Z</option>
                    <option value="z-a">Z-A</option>
                </select>
                <button class="btn btn-secondary" onclick="sort(3);">Sort</button>
            </th>
            <th scope="col">Delete</th>
          </tr>
        </thead>
        <tbody id="master_list">
        </tbody>
      </table>

      <script> 
        let item_array = [];
        let id = 0;
        let del_but = ""
        
        function submit() {
            let ipt1 = $("#input1").val();  //Gets the value in input box 1
            let ipt2 = $("#input2").val();
            let ipt3 = $("#input3").val();
            let new_item = {id, ipt1, ipt2, ipt3};   //Creates an object storing the inputted data
            console.log(new_item);
            del_but = "<button class='btn btn-danger' id="+ id + " onclick='deleteItem(" + id + ");'>Delete</button>"   //Ties the button to the same ID as the input data
            id += 1;    //Generates new ID
            item_array.push(new_item);
            console.log(item_array);
            $("#input1").val("");
            $("#input2").val("");
            $("#input3").val("");
            console.log($("#input1").val());
            refresh();  //Redisplays the table after a new item is added
        }
        
        function deleteItem(item_id) {
            let without = item_array.filter(function(item) {return item.id!==item_id}); //Returns an array of all items whose IDs DO NOT match the ID of the item to be deleted
            item_array = without;
            refresh();
        }

        function refresh() {
            let result = "";
            for (let i=0; i<item_array.length; i++) {
                del_but = "<button class='btn btn-danger' id="+ item_array[i].id + " onclick='deleteItem(" + item_array[i].id + ");'>Delete</button>"   //Makes sure the button IDs still match their corresponding data
                result += "<tr><td>" + item_array[i].ipt1 + "</td>\n<td>" + item_array[i].ipt2 + "</td>\n<td>" + item_array[i].ipt3 + "</td>\n<td>" + del_but + "</td></tr>"    //Changes the innerHTML of the table to contain the updated row data
            }
            $("#master_list").html(result);
        }

        function sort(num) {
            console.log("sorting");
            let col = Number(num);
            let sort_list = item_array;
            console.log(col);
            if (col===1) {
                let sort_by = $("#col1").val();
                if (sort_by==="new-old") {
                    sort_list.sort((a,b) => {
                        return a.id - b.id;
                    });
                    console.log("chronological");
                }
                else if (sort_by==="old-new") {
                    sort_list.sort((a,b) => {
                        return b.id - a.id;
                    });
                    console.log("reverse chronological");
                }
                else if (sort_by==="a-z") {
                    sort_list.sort((a,b) => {
                        let lower_a = a.ipt1.toLowerCase();
                        let lower_b = b.ipt1.toLowerCase();
                        if (lower_a<lower_b) {
                            return -1;
                        }
                        if (lower_a>lower_b) {
                            return 1;
                        }
                        return 0;
                    });
                    console.log("alphabetical");
                }
                else if (sort_by==="z-a") {
                    sort_list.sort((a,b) => {
                        let lower_a = a.ipt1.toLowerCase();
                        let lower_b = b.ipt1.toLowerCase();
                        if (lower_a>lower_b) {
                            return -1;
                        }
                        if (lower_a<lower_b) {
                            return 1;
                        }
                        return 0;
                    });
                    console.log("reverse alphabetical");
                }
            }
            if (col===2) {
                let sort_by = $("#col2").val();
                if (sort_by==="new-old") {
                    sort_list.sort((a,b) => {
                        return a.id - b.id;
                    });
                    console.log("chronological");
                }
                else if (sort_by==="old-new") {
                    sort_list.sort((a,b) => {
                        return b.id - a.id;
                    });
                    console.log("reverse chronological");
                }
                else if (sort_by==="a-z") {
                    sort_list.sort((a,b) => {
                        let lower_a = a.ipt2.toLowerCase();
                        let lower_b = b.ipt2.toLowerCase();
                        if (lower_a<lower_b) {
                            return -1;
                        }
                        if (lower_a>lower_b) {
                            return 1;
                        }
                        return 0;
                    });
                    console.log("alphabetical");
                }
                else if (sort_by==="z-a") {
                    sort_list.sort((a,b) => {
                        let lower_a = a.ipt2.toLowerCase();
                        let lower_b = b.ipt2.toLowerCase();
                        if (lower_a>lower_b) {
                            return -1;
                        }
                        if (lower_a<lower_b) {
                            return 1;
                        }
                        return 0;
                    });
                    console.log("reverse alphabetical");
                }
            }
            if (col===3) {
                let sort_by = $("#col3").val();
                if (sort_by==="new-old") {
                    sort_list.sort((a,b) => {
                        return a.id - b.id;
                    });
                    console.log("chronological");
                }
                else if (sort_by==="old-new") {
                    sort_list.sort((a,b) => {
                        return b.id - a.id;
                    });
                    console.log("reverse chronological");
                }
                else if (sort_by==="a-z") {
                    sort_list.sort((a,b) => {
                        let lower_a = a.ipt3.toLowerCase();
                        let lower_b = b.ipt3.toLowerCase();
                        if (lower_a<lower_b) {
                            return -1;
                        }
                        if (lower_a>lower_b) {
                            return 1;
                        }
                        return 0;
                    });
                    console.log("alphabetical");
                }
                else if (sort_by==="z-a") {
                    sort_list.sort((a,b) => {
                        let lower_a = a.ipt3.toLowerCase();
                        let lower_b = b.ipt3.toLowerCase();
                        if (lower_a>lower_b) {
                            return -1;
                        }
                        if (lower_a<lower_b) {
                            return 1;
                        }
                        return 0;
                    });
                    console.log("reverse alphabetical");
                }
            }
            refresh();
        }
      </script>
</body>
</html>
